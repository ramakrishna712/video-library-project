{"ast":null,"code":"import{useFormik}from\"formik\";import{useState}from\"react\";import{useCookies}from\"react-cookie\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import*as Yup from\"yup\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function AdminLogin(){const[isLoading,setIsLoading]=useState(false);const[setCookie]=useCookies(['admin-id']);let navigate=useNavigate();const apiUrl=process.env.REACT_APP_API_URL;const formik=useFormik({initialValues:{UserId:'',Password:''},validationSchema:Yup.object({UserId:Yup.string().required(\"Admin ID is required\"),Password:Yup.string().required(\"Password is required\")}),onSubmit:admin=>{setIsLoading(true);axios.get(\"\".concat(apiUrl,\"/get-admin\")).then(response=>{const isValidAdmin=response.data.some(adm=>adm.UserId===admin.UserId&&adm.Password===admin.Password);if(isValidAdmin){setCookie('admin-id',admin.UserId);navigate(\"/admin-dashboard\");}else{navigate('/admin-error');}}).catch(error=>{console.error(\"Error fetching admin data:\",error);alert(\"An error occurred while logging in. Please try again.\");}).finally(()=>setIsLoading(false));}});return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid d-flex justify-content-center align-items-center\",style:{height:\"100vh\"},children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-control p-4\",style:{maxWidth:\"400px\"},onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center h3 fw-bold p-2 mb-4\",children:\"Admin Login\"}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"Admin ID\"}),/*#__PURE__*/_jsxs(\"dd\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"UserId\",onChange:formik.handleChange,value:formik.values.UserId,className:\"form-control\",placeholder:\"Enter Admin ID\",required:true}),formik.errors.UserId&&/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:formik.errors.UserId})]}),/*#__PURE__*/_jsx(\"dt\",{children:\"Password\"}),/*#__PURE__*/_jsxs(\"dd\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"Password\",onChange:formik.handleChange,value:formik.values.Password,className:\"form-control\",placeholder:\"Enter Password\",required:true}),formik.errors.Password&&/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:formik.errors.Password})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success w-100\",disabled:isLoading,children:isLoading?\"Logging in...\":\"Login\"})]})});}","map":{"version":3,"names":["useFormik","useState","useCookies","useNavigate","axios","Yup","jsx","_jsx","jsxs","_jsxs","AdminLogin","isLoading","setIsLoading","setCookie","navigate","apiUrl","process","env","REACT_APP_API_URL","formik","initialValues","UserId","Password","validationSchema","object","string","required","onSubmit","admin","get","concat","then","response","isValidAdmin","data","some","adm","catch","error","console","alert","finally","className","style","height","children","maxWidth","handleSubmit","type","name","onChange","handleChange","value","values","placeholder","errors","disabled"],"sources":["C:/Users/Rama Krishna/videolibrary-app/src/components/admin-login.jsx"],"sourcesContent":["import { useFormik } from \"formik\";\r\nimport { useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport * as Yup from \"yup\";\r\n\r\nexport function AdminLogin() {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [ setCookie] = useCookies(['admin-id']);\r\n    let navigate = useNavigate();\r\n\r\n    const apiUrl = process.env.REACT_APP_API_URL; \r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            UserId: '',\r\n            Password: '',\r\n        },\r\n        validationSchema: Yup.object({\r\n            UserId: Yup.string().required(\"Admin ID is required\"),\r\n            Password: Yup.string().required(\"Password is required\"),\r\n        }),\r\n        onSubmit: (admin) => {\r\n            setIsLoading(true);\r\n            axios.get(`${apiUrl}/get-admin`) \r\n                .then(response => {\r\n                    const isValidAdmin = response.data.some(\r\n                        (adm) => adm.UserId === admin.UserId && adm.Password === admin.Password\r\n                    );\r\n                    if (isValidAdmin) {\r\n                        setCookie('admin-id', admin.UserId);\r\n                        navigate(\"/admin-dashboard\");\r\n                    } else {\r\n                        navigate('/admin-error');\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error(\"Error fetching admin data:\", error);\r\n                    alert(\"An error occurred while logging in. Please try again.\");\r\n                })\r\n                .finally(() => setIsLoading(false));\r\n        },\r\n    });\r\n\r\n    return (\r\n        <div className=\"container-fluid d-flex justify-content-center align-items-center\" style={{ height: \"100vh\" }}>\r\n            <form className=\"form-control p-4\" style={{ maxWidth: \"400px\" }} onSubmit={formik.handleSubmit}>\r\n                <div className=\"text-center h3 fw-bold p-2 mb-4\">Admin Login</div>\r\n                <dl>\r\n                    <dt>Admin ID</dt>\r\n                    <dd>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"UserId\"\r\n                            onChange={formik.handleChange}\r\n                            value={formik.values.UserId}\r\n                            className=\"form-control\"\r\n                            placeholder=\"Enter Admin ID\"\r\n                            required\r\n                        />\r\n                        {formik.errors.UserId && <small className=\"text-danger\">{formik.errors.UserId}</small>}\r\n                    </dd>\r\n                    <dt>Password</dt>\r\n                    <dd>\r\n                        <input\r\n                            type=\"password\"\r\n                            name=\"Password\"\r\n                            onChange={formik.handleChange}\r\n                            value={formik.values.Password}\r\n                            className=\"form-control\"\r\n                            placeholder=\"Enter Password\"\r\n                            required\r\n                        />\r\n                        {formik.errors.Password && <small className=\"text-danger\">{formik.errors.Password}</small>}\r\n                    </dd>\r\n                </dl>\r\n                <button type=\"submit\" className=\"btn btn-success w-100\" disabled={isLoading}>\r\n                    {isLoading ? \"Logging in...\" : \"Login\"}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}