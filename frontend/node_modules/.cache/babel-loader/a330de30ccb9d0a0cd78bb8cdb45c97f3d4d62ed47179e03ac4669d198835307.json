{"ast":null,"code":"import _wrapAsyncGenerator from\"C:/Users/Rama Krishna/videolibrary-app/frontend/node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js\";import _awaitAsyncGenerator from\"C:/Users/Rama Krishna/videolibrary-app/frontend/node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js\";import _asyncGeneratorDelegate from\"C:/Users/Rama Krishna/videolibrary-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncGeneratorDelegate.js\";import _asyncIterator from\"C:/Users/Rama Krishna/videolibrary-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncIterator.js\";export const streamChunk=function*(chunk,chunkSize){let len=chunk.byteLength;if(!chunkSize||len<chunkSize){yield chunk;return;}let pos=0;let end;while(pos<len){end=pos+chunkSize;yield chunk.slice(pos,end);pos=end;}};export const readBytes=/*#__PURE__*/function(){var _ref=_wrapAsyncGenerator(function*(iterable,chunkSize){var _iteratorAbruptCompletion=false;var _didIteratorError=false;var _iteratorError;try{for(var _iterator=_asyncIterator(readStream(iterable)),_step;_iteratorAbruptCompletion=!(_step=yield _awaitAsyncGenerator(_iterator.next())).done;_iteratorAbruptCompletion=false){const chunk=_step.value;{yield*_asyncGeneratorDelegate(_asyncIterator(streamChunk(chunk,chunkSize)),_awaitAsyncGenerator);}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(_iteratorAbruptCompletion&&_iterator.return!=null){yield _awaitAsyncGenerator(_iterator.return());}}finally{if(_didIteratorError){throw _iteratorError;}}}});return function readBytes(_x,_x2){return _ref.apply(this,arguments);};}();const readStream=/*#__PURE__*/function(){var _ref2=_wrapAsyncGenerator(function*(stream){if(stream[Symbol.asyncIterator]){yield*_asyncGeneratorDelegate(_asyncIterator(stream),_awaitAsyncGenerator);return;}const reader=stream.getReader();try{for(;;){const{done,value}=yield _awaitAsyncGenerator(reader.read());if(done){break;}yield value;}}finally{yield _awaitAsyncGenerator(reader.cancel());}});return function readStream(_x3){return _ref2.apply(this,arguments);};}();export const trackStream=(stream,chunkSize,onProgress,onFinish)=>{const iterator=readBytes(stream,chunkSize);let bytes=0;let done;let _onFinish=e=>{if(!done){done=true;onFinish&&onFinish(e);}};return new ReadableStream({async pull(controller){try{const{done,value}=await iterator.next();if(done){_onFinish();controller.close();return;}let len=value.byteLength;if(onProgress){let loadedBytes=bytes+=len;onProgress(loadedBytes);}controller.enqueue(new Uint8Array(value));}catch(err){_onFinish(err);throw err;}},cancel(reason){_onFinish(reason);return iterator.return();}},{highWaterMark:2});};","map":{"version":3,"names":["streamChunk","chunk","chunkSize","len","byteLength","pos","end","slice","readBytes","_ref","_wrapAsyncGenerator","iterable","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","_iterator","_asyncIterator","readStream","_step","_awaitAsyncGenerator","next","done","value","_asyncGeneratorDelegate","err","return","_x","_x2","apply","arguments","_ref2","stream","Symbol","asyncIterator","reader","getReader","read","cancel","_x3","trackStream","onProgress","onFinish","iterator","bytes","_onFinish","e","ReadableStream","pull","controller","close","loadedBytes","enqueue","Uint8Array","reason","highWaterMark"],"sources":["C:/Users/Rama Krishna/videolibrary-app/frontend/src/node_modules/axios/lib/helpers/trackStream.js"],"sourcesContent":["\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}