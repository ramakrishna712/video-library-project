{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useCookies}from\"react-cookie\";import axios from\"axios\";import{useDispatch}from\"react-redux\";import{addToSaveList}from\"../slicers/video-slicer\";import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function UserDashBoard(){const[cookies]=useCookies(['user-id']);const[categories,setCategories]=useState([{CategoryId:0,CategoryName:\"\"}]);const[videos,setVideos]=useState([{VideoId:0,Title:\"\",Url:\"\",Description:\"\",Views:0,Likes:0,Dislikes:0,CategoryId:0}]);const[selectedCategoryId,setSelectedCategoryId]=useState(null);const[savedVideos,setSavedVideos]=useState([]);const apiUrl=process.env.REACT_APP_API_URL;const dispatch=useDispatch();function LoadCategories(){axios.get(\"\".concat(apiUrl,\"/get-categories\")).then(response=>{setCategories(response.data);}).catch(error=>{console.error(\"Error loading categories:\",error.message);});}function LoadVideos(CategoryId){axios.get(\"\".concat(apiUrl,\"/get-videos/category/\").concat(CategoryId)).then(response=>{setVideos(response.data);}).catch(error=>{console.error(\"Error loading videos:\",error.message);});}function LoadAllVideos(){axios.get(\"\".concat(apiUrl,\"/get-videos\")).then(response=>{setVideos(response.data);}).catch(error=>{console.error(\"Error loading all videos:\",error.message);});}function LoadSavedVideos(){axios.get(\"\".concat(apiUrl,\"/get-saved-videos\")).then(response=>{setSavedVideos(response.data);}).catch(error=>{console.error(\"Error loading saved videos:\",error.message);});}function WatchLater(video){if(savedVideos.some(saved=>saved.VideoId===video.VideoId)){alert(\"This video is already in your Watch Later List.\");return;}dispatch(addToSaveList(video));axios.post(\"\".concat(apiUrl,\"/saved-videos\"),video).then(()=>{alert(\"Video saved to Watch Later.\");setSavedVideos(prev=>[...prev,video]);}).catch(error=>{console.error(\"Error saving video to Watch Later:\",error.message);});}useEffect(()=>{LoadCategories();LoadAllVideos();},[]);useEffect(()=>{LoadSavedVideos();},[]);useEffect(()=>{if(selectedCategoryId!==null){LoadVideos(selectedCategoryId);}else{LoadAllVideos();}},[selectedCategoryId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"d-flex p-2 bg-dark text-light justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h3 ms-3\",children:\"User Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"h5 text-danger me-3 bi bi-person\",children:[\" User-\",cookies[\"user-id\"]]}),/*#__PURE__*/_jsx(Link,{to:\"/watch-later\",className:\"btn tex btn-light btn-sm bi-clock\",children:\" Watch Later\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-around col-12 mt-3 mb-4\",children:categories.map(category=>/*#__PURE__*/_jsx(\"div\",{className:\"w-100 btn  btn-outline-light   p-2 \".concat(selectedCategoryId===category.CategoryId?\"bg-danger\":\"border\",\" text-dark\"),onClick:()=>setSelectedCategoryId(category.CategoryId),children:category.CategoryName},category.CategoryId))}),/*#__PURE__*/_jsx(\"main\",{className:\"row\",children:videos.map(video=>/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-sm-6 col-md-4 col-lg-3 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-0\",style:{height:\"220px\"},children:/*#__PURE__*/_jsx(\"iframe\",{src:video.Url,width:\"100%\",height:\"200\",title:\"videos\",allowFullScreen:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold card-body text-center\",children:video.Title}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer d-flex justify-content-around\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bi bi-eye btn btn-light\",children:video.Views}),/*#__PURE__*/_jsx(\"button\",{className:\"bi bi-hand-thumbs-up btn btn-light\",children:video.Likes}),/*#__PURE__*/_jsx(\"button\",{className:\"bi bi-hand-thumbs-down btn btn-light\",children:video.Dislikes}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info btn-sm\",onClick:()=>WatchLater(video),children:\"Watch Later\"})]})]})},video.VideoId))})]});}","map":{"version":3,"names":["useEffect","useState","useCookies","axios","useDispatch","addToSaveList","Link","jsx","_jsx","jsxs","_jsxs","UserDashBoard","cookies","categories","setCategories","CategoryId","CategoryName","videos","setVideos","VideoId","Title","Url","Description","Views","Likes","Dislikes","selectedCategoryId","setSelectedCategoryId","savedVideos","setSavedVideos","apiUrl","process","env","REACT_APP_API_URL","dispatch","LoadCategories","get","concat","then","response","data","catch","error","console","message","LoadVideos","LoadAllVideos","LoadSavedVideos","WatchLater","video","some","saved","alert","post","prev","className","children","to","map","category","onClick","style","height","src","width","title","allowFullScreen"],"sources":["C:/Users/Rama Krishna/videolibrary-app/frontend/src/components/user-dashboard.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport axios from \"axios\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addToSaveList } from \"../slicers/video-slicer\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport function UserDashBoard() {\r\n  const [cookies] = useCookies(['user-id']);\r\n  const [categories, setCategories] = useState([{ CategoryId: 0, CategoryName: \"\" }]);\r\n  const [videos, setVideos] = useState([\r\n    { VideoId: 0, Title: \"\", Url: \"\", Description: \"\", Views: 0, Likes: 0, Dislikes: 0, CategoryId: 0 }\r\n  ]);\r\n  const [selectedCategoryId, setSelectedCategoryId] = useState(null);\r\n  const [savedVideos, setSavedVideos] = useState([])\r\n  const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\n \r\n  const dispatch = useDispatch();\r\n\r\n  function LoadCategories() {\r\n    axios.get(`${apiUrl}/get-categories`)\r\n      .then(response => {\r\n        setCategories(response.data);\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error loading categories:\", error.message);\r\n      });\r\n  }\r\n\r\n  function LoadVideos(CategoryId) {\r\n    axios.get(`${apiUrl}/get-videos/category/${CategoryId}`)\r\n      .then(response => {\r\n        setVideos(response.data);\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error loading videos:\", error.message);\r\n      });\r\n  }\r\n\r\n  function LoadAllVideos() {\r\n    axios.get(`${apiUrl}/get-videos`)\r\n      .then(response => {\r\n        setVideos(response.data);\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error loading all videos:\", error.message);\r\n      });\r\n  }\r\n\r\n  function LoadSavedVideos() {\r\n    axios.get(`${apiUrl}/get-saved-videos`)\r\n      .then(response => {\r\n        setSavedVideos(response.data);\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error loading saved videos:\", error.message);\r\n      });\r\n  }\r\n\r\n  function WatchLater(video) {\r\n    if (savedVideos.some(saved => saved.VideoId === video.VideoId)) {\r\n      alert(\"This video is already in your Watch Later List.\");\r\n      return;\r\n    }\r\n    dispatch(addToSaveList(video));\r\n\r\n    axios.post(`${apiUrl}/saved-videos`, video)\r\n      .then(() => {\r\n        alert(\"Video saved to Watch Later.\");\r\n        setSavedVideos(prev => [...prev, video]);\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error saving video to Watch Later:\", error.message);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    LoadCategories();\r\n    LoadAllVideos();\r\n  },[]);\r\n\r\n  useEffect(() => {\r\n    LoadSavedVideos(); \r\n  },[]);\r\n\r\n  useEffect(() => {\r\n    if (selectedCategoryId !== null) {\r\n      LoadVideos(selectedCategoryId);\r\n    } else {\r\n      LoadAllVideos();\r\n    }\r\n  }, [selectedCategoryId]);\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <header className=\"d-flex p-2 bg-dark text-light justify-content-between align-items-center\">\r\n        <div className=\"h3 ms-3\">User Dashboard</div>\r\n        <div className=\"h5 text-danger me-3 bi bi-person\"> User-{cookies[\"user-id\"]}</div>\r\n        <Link to=\"/watch-later\" className=\"btn tex btn-light btn-sm bi-clock\"> Watch Later</Link>\r\n      </header>\r\n\r\n      <div className=\"d-flex justify-content-around col-12 mt-3 mb-4\">\r\n        {\r\n          categories.map(category => (\r\n            <div\r\n              className={`w-100 btn  btn-outline-light   p-2 ${selectedCategoryId === category.CategoryId ? \"bg-danger\" : \"border\"} text-dark`}\r\n              key={category.CategoryId}\r\n              onClick={() => setSelectedCategoryId(category.CategoryId)}\r\n            >\r\n              {category.CategoryName}\r\n            </div>\r\n          ))\r\n        }\r\n      </div>\r\n\r\n      <main className=\"row\">\r\n        {videos.map((video) => (\r\n          <div key={video.VideoId} className=\"col-12 col-sm-6 col-md-4 col-lg-3 p-2\">\r\n            <div className=\"card\">\r\n              <div className=\"card-header p-0\" style={{ height: \"220px\" }}>\r\n                <iframe src={video.Url} width=\"100%\" height=\"200\" title=\"videos\" allowFullScreen></iframe>\r\n              </div>\r\n              <div className=\"fw-bold card-body text-center\">{video.Title}</div>\r\n              <div className=\"card-footer d-flex justify-content-around\">\r\n                <button className=\"bi bi-eye btn btn-light\">{video.Views}</button>\r\n                <button className=\"bi bi-hand-thumbs-up btn btn-light\">{video.Likes}</button>\r\n                <button className=\"bi bi-hand-thumbs-down btn btn-light\">{video.Dislikes}</button>\r\n                <button className=\"btn btn-info btn-sm\" onClick={() => WatchLater(video)}>Watch Later</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}